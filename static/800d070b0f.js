define("search",function(e){function t(e){e=e.toLowerCase();if(e.length===0)return[];if(e.length<3)return[e];var t=[];for(var n=0;n<=e.length-3;n+=1)t.push(e.substr(n,3));return t}function n(){this.trigramTable={},this.resultIndex=[]}return n.prototype.addTerm=function(e,n){var r={};this.resultIndex.push(n);for(var i=0;i<e.length;i+=1){var r=t(e[i]);for(var s=0;s<r.length;s+=1){var o=r[s];o in this.trigramTable||(this.trigramTable[o]=[]),this.trigramTable[o].push(this.resultIndex.length-1)}}},n.prototype.search=function(e,n){var r=this,i=e.toLowerCase().split(" "),n=n||300,s=[],o={};i.forEach(function(e,n){s=s.concat(t(e))}),s.forEach(function(e){if(e in r.trigramTable){var t=r.trigramTable[e];for(var n=0;n<t.length;n+=1){var i=t[n];o[i]=o[i]||0,o[i]=o[i]+1}}});var u=[];for(var a in o)u.push({code:a,score:o[a]});if(u.length>0){u.sort(function(e,t){return t.score!==e.score?t.score-e.score:e.code-t.code});var f=Math.ceil(u[0].score/2),l=[];for(var c=0;c<u.length&&c<n;c+=1)l.push(u[c]);return l.map(function(e){return r.resultIndex[e.code]})}return[]},n}),require(["search"],function(e){function t(e){var t=e.match(/^\\u([\dABCDEFabcdef]{4})$/),n=e.match(/^&#(\d+);$/)||e.match(/^(\d+)$/),r=undefined;return t?r=parseInt(t[1],16):n?r=n[1]:e.length===1&&(r=e.charCodeAt(0)),r}function n(e){return Math.floor((e-65536)/1024)+55296}function r(e){return(e-65536)%1024+56320}function i(e){if(e<=65535)return"\\u"+(e+65536).toString(16).substr(-4).toUpperCase();throw"Code point outside BMP cannot be encoded."}function s(e){return e<=65535?i(e):i(n(e))+i(r(e))}function c(e){_gaq.push(["_trackEvent","search",undefined,e]);var t=[],n=e.match(/^\\u(\d{4})$/),r=e.match(/^&#(\d+);$/)||e.match(/^(\d+)$/);n?t=[parseInt(n[1],16)]:r?t=[r[1]]:t=l.search(e),e.length===1&&t.length===0&&(t=[e.charCodeAt(0)]),t.length===0?$("#help").show():$("#help").hide(),$("#results").html($.map(t,function(e){var t=o[e]&&o[e].n.indexOf("combining")!==-1,n=(t?"&#9676;":"")+"&#"+e+";";return'<a href="#id'+e+'" id="id'+e+'">'+n+"</a>"}).join("")),t.length===1&&u.activate($("#results a").first())}function h(){if(!location.hash)return;var e=location.hash.split("#")[1],n=e.match(/^([^\/]+)\/(.*)$/),r=t(e),i=undefined,s=undefined;n?(i=n[1],s=n[2]):r?i=s=r:(i=e,s=undefined),s&&i===undefined&&(i=s),f.val(i),c(i);if(s){var o=$("#id"+s).first();o&&u.activate(o)}}document.getElementById("searchField").focus(),document.forms[0].onsubmit=function(){return!1},_gaq=window._gaq||[],_gaq.push(["_setAccount","UA-33198175-1"]),_gaq.push(["_setDomainName","charcod.es"]),_gaq.push(["_trackPageview"]);var o={},u=function(){var e,t,n=function(e){var t=o[e],n=$(".templates .charInfo").clone(),r=o[e]&&o[e].n.indexOf("combining")!==-1,i=["&amp;#"+e+";"],u=$("#searchField").val(),a=u+"/"+e,f=e;return u===e&&(a=e),location.hash="#"+a,n.find("h2").html((r?"&#9676;":"")+"&#"+e+";"),n.find(".permalink").attr("href","#"+f),n.find(".char-source").html(s(parseInt(e,10))),n.find(".char-codepoint").html(e),t&&(n.find("h3").html(t.n),n.find(".char-group").attr("href","#"+t.b).html(t.b),t.a&&t.a.length>0&&n.find(".aliases").html(t.a.join(", ")),t.altnames&&t.altnames.html&&i.push("&amp;#"+t.altnames.html+";"),n.find(".char-html").html(i.join("<br>")),_gaq.push(["_trackEvent","popup","activate",t.b]),t.altnames&&t.altnames.latex?n.find(".char-latex").html(t.altnames.latex):n.find(".char-latex-row").hide()),n};return{activate:function(r){var i=r[0].id.replace("id",""),s=r.position().top,o=r;e&&this.deactivate(),e=r,t=n(i);while(o.next().length&&o.next().position().top===s)o=o.next();t.insertAfter(o),e.addClass("active")},deactivate:function(){_gaq.push(["_trackEvent","popup","deactivate"]),e.removeClass("active"),t&&t.remove(),e=t=undefined}}}();$("#results").on("click","a",function(e){u.activate($(e.target)),e.preventDefault()});var a,f=$("#searchField");f.keyup(function(e){a&&window.clearTimeout(a),a=window.setTimeout(function(){c(f.val().trim())},250)}),$(".form-search").submit(function(){return c(f.val().trim()),!1});var l=new e;$.ajax({url:"data.json",dataType:"json",success:function(e){var t,n=e.length,r,i,s;for(t=0;t<n;t+=1){r=e[t],o[r.c]=r,i=[].concat(r.n.split(" "),[r.b],r.a?r.a:[]);if(r.altnames)for(s in r.altnames)i.push(r.altnames[s]);l.addTerm(i,r.c)}f.val()&&c(f.val()),h()},error:function(){throw new Error("could not load data.json: "+arguments)}}),window.onhashchange=function(e){e.newURL!==e.oldURL&&h()},h()})